{# templates/reset_password/reset.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Reset Your Password{% endblock %}

{% block body %}
  <section class="account padding-top padding-bottom sec-bg-color2">
    <div class="container">
      <div class="account__wrapper" data-aos="fade-up" data-aos-duration="800">
        <div class="row g-4">
          <div class="col-lg-12">
            <div class="account__content account__content--style1">

              <!-- account title -->
              <div class="account__header">
                <h2>Reset Your Password</h2>
                <p>Your reset link is valid. Please enter your new password below.</p>
              </div>

              {% for flash_error in app.flashes('reset_password_error') %}
                <div class="alert alert-danger">{{ flash_error }}</div>
              {% endfor %}

              {# Symfony form: ChangePasswordForm #}
              {{ form_start(resetForm, {
                  'attr': { 'class': 'account__form needs-validation', 'novalidate': 'novalidate' }
              }) }}
                <div class="row g-4">
                  <div class="col-12 col-md-6">
                    <div class="form-pass">
                      {{ form_label(resetForm.plainPassword.first, 'New Password', {
                          'label_attr': { 'class': 'form-label', 'for': 'account-pass' }
                        }) 
                      }}
                      {{ form_widget(resetForm.plainPassword.first, {
                          'attr': {
                            'class': 'form-control showhide-pass',
                            'id': 'account-pass',
                            'placeholder': 'New Password'
                          }
                      }) }}
                      {{ form_errors(resetForm.plainPassword.first) }}
                      <button type="button" id="btnToggle" class="form-pass__toggle">
                        <i id="eyeIcon1" class="fa fa-eye"></i>
                      </button>
                    </div>
                  </div>
                  <div class="col-12 col-md-6">
                    <div class="form-pass">
                      {{ form_label(resetForm.plainPassword.second, 'Confirm Password', {
                          'label_attr': { 'class': 'form-label', 'for': 'account-cpass' }
                        }) 
                      }}
                      {{ form_widget(resetForm.plainPassword.second, {
                          'attr': {
                            'class': 'form-control showhide-pass',
                            'id': 'account-cpass',
                            'placeholder': 'Re-type password'
                          }
                      }) }}
                      {{ form_errors(resetForm.plainPassword.second) }}
                      <button type="button" id="btnCToggle" class="form-pass__toggle">
                        <i id="eyeIcon2" class="fa fa-eye"></i>
                      </button>
                    </div>
                  </div>
                </div>

                <button type="submit" class="trk-btn trk-btn--border trk-btn--primary d-block mt-4">
                  Reset Password
                </button>
              {{ form_end(resetForm) }}
              {# End Symfony form #}

              <div class="account__switch">
                <p>
                  <a href="{{ path('app_login') }}" class="style2">
                    <i class="fa-solid fa-arrow-left-long"></i> Back to <span>Login</span>
                  </a>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="account__shape">
      <span class="account__shape-item account__shape-item--1">
        <img src="{{ asset('assets/images/contact/4.png') }}" alt="shape-icon">
      </span>
    </div>
  </section>
{% endblock %}
